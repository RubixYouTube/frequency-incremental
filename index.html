<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hertz Incremental - v0.4.1a</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/gh/Patashu/break_eternity.js@master/break_eternity.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .tab {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .tab::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }

    .tab:hover::before {
      left: 100%;
    }

    .tab:hover {
      transform: translateX(5px);
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
    }

    .popup,
    .popup2,
    .popup3,
    .popup-theme {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 450px;
      padding: 25px;
      display: none;
      flex-direction: column;
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
      opacity: 0;
      transition: opacity 0.3s ease;
      backdrop-filter: blur(15px);
      z-index: 1000;
      border: 2px solid rgba(255,255,255,0.3);
      background: rgba(0, 0, 0, 0.9);
    }

    .popup.visible,
    .popup2.visible,
    .popup3.visible,
    .popup-theme.visible {
      display: flex;
      opacity: 1;
    }

    .popup {
      width: 400px;
      padding: 20px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .popup3 {
      animation: flash 1s ease-in-out infinite;
    }

    @keyframes flash {
      0%, 100% { border-color: #ef4444; box-shadow: 0 0 30px rgba(239, 68, 68, 0.5); }
      50% { border-color: #f97316; box-shadow: 0 0 30px rgba(249, 115, 22, 0.5); }
    }

    .achievement {
      background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
      border: 2px solid #10b981;
      width: 100%;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      margin-top: 15px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      font-size: 1.2rem;
      font-weight: bold;
    }

    .achievement.completed {
      background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
      color: #000;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    .upgrade-card {
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 15px;
      padding: 20px;
      margin: 10px 0;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .upgrade-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border-color: rgba(255,255,255,0.5);
    }

    .upgrade-btn {
      padding: 12px 24px;
      border: 2px solid;
      border-radius: 10px;
      font-weight: bold;
      transition: all 0.3s ease;
      cursor: pointer;
      background: rgba(255,255,255,0.1);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .upgrade-btn:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 0 20px currentColor;
    }

    .upgrade-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .theme-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid #fff;
      margin: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .theme-btn:hover {
      transform: scale(1.2);
      box-shadow: 0 0 20px currentColor;
    }

    .theme-btn.active::after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      color: #fff;
      text-shadow: 0 0 10px #000;
    }

    .stat-display {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      border-radius: 15px;
      padding: 30px;
      margin: 20px 0;
      border: 2px solid rgba(255,255,255,0.2);
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
    }

    .prestige-btn {
      background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
      border: 3px solid #a78bfa;
      padding: 20px 40px;
      border-radius: 15px;
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
    }

    .prestige-btn:hover:not(:disabled) {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(139, 92, 246, 0.6);
    }

    .prestige-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    }

    .version {
      position: fixed;
      bottom: 10px;
      left: 10px;
      color: rgba(255, 255, 255, 0.5);
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      font-size: 0.9rem;
    }

    .hidden {
      display: none !important;
    }

    .grid-upgrades {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    /* Theme backgrounds and text colors */
    .theme-red { 
      background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%); 
      color: #fca5a5;
    }
    .theme-red .text-primary { color: #ef4444 !important; }
    .theme-red .text-secondary { color: #fca5a5 !important; }
    
    .theme-orange { 
      background: linear-gradient(135deg, #7c2d12 0%, #9a3412 100%); 
      color: #fdba74;
    }
    .theme-orange .text-primary { color: #f97316 !important; }
    .theme-orange .text-secondary { color: #fdba74 !important; }
    
    .theme-yellow { 
      background: linear-gradient(135deg, #713f12 0%, #854d0e 100%); 
      color: #fde047;
    }
    .theme-yellow .text-primary { color: #eab308 !important; }
    .theme-yellow .text-secondary { color: #fde047 !important; }
    
    .theme-green { 
      background: linear-gradient(135deg, #14532d 0%, #166534 100%); 
      color: #86efac;
    }
    .theme-green .text-primary { color: #22c55e !important; }
    .theme-green .text-secondary { color: #86efac !important; }
    
    .theme-blue { 
      background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%); 
      color: #93c5fd;
    }
    .theme-blue .text-primary { color: #3b82f6 !important; }
    .theme-blue .text-secondary { color: #93c5fd !important; }
    
    .theme-purple { 
      background: linear-gradient(135deg, #581c87 0%, #6b21a8 100%); 
      color: #d8b4fe;
    }
    .theme-purple .text-primary { color: #a855f7 !important; }
    .theme-purple .text-secondary { color: #d8b4fe !important; }
    
    .theme-pink { 
      background: linear-gradient(135deg, #831843 0%, #9f1239 100%); 
      color: #fbcfe8;
    }
    .theme-pink .text-primary { color: #ec4899 !important; }
    .theme-pink .text-secondary { color: #fbcfe8 !important; }
    
    .theme-brown { 
      background: linear-gradient(135deg, #3e2723 0%, #4e342e 100%); 
      color: #d7ccc8;
    }
    .theme-brown .text-primary { color: #a1887f !important; }
    .theme-brown .text-secondary { color: #d7ccc8 !important; }
    
    .theme-black { 
      background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%); 
      color: #e5e5e5;
    }
    .theme-black .text-primary { color: #ffffff !important; }
    .theme-black .text-secondary { color: #d1d5db !important; }
    
    .theme-white { 
      background: linear-gradient(135deg, #e5e5e5 0%, #f5f5f5 100%); 
      color: #1a1a1a;
    }
    .theme-white .text-primary { color: #000000 !important; }
    .theme-white .text-secondary { color: #374151 !important; }
    .theme-white .stat-display,
    .theme-white .upgrade-card {
      background: rgba(0,0,0,0.05);
      border-color: rgba(0,0,0,0.2);
    }

    .scrollable-content {
      max-height: calc(100vh - 100px);
      overflow-y: auto;
      padding-right: 10px;
    }

    .scrollable-content::-webkit-scrollbar {
      width: 10px;
    }

    .scrollable-content::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
    }

    .scrollable-content::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
    }

    .scrollable-content::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.5);
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Game State
      let gameState = {
        hz: new Decimal(0),
        hzPerSec: new Decimal(1),
        
        // Hz Upgrades
        upgrade1Level: new Decimal(0),
        upgrade1Cost: new Decimal(7),
        upgrade2Level: new Decimal(0),
        upgrade2Cost: new Decimal(100),
        upgrade3Level: new Decimal(0),
        upgrade3Cost: new Decimal(500),
        upgrade4Level: new Decimal(0),
        upgrade4Cost: new Decimal(2500),
        upgrade5Level: new Decimal(0),
        upgrade5Cost: new Decimal(10000),
        upgrade6Level: new Decimal(0),
        upgrade6Cost: new Decimal(50000),
        
        // Volume (Prestige 1)
        volume: new Decimal(0),
        volumeUnlocked: false,
        volumeUpgrade1: new Decimal(0),
        volumeUpgrade2: new Decimal(0),
        volumeUpgrade3: new Decimal(0),
        volumeUpgrade4: new Decimal(0),
        volumeUpgrade5: new Decimal(0),
        volumeUpgrade6: new Decimal(0),
        
        // Speakers (Prestige 2)
        speakers: new Decimal(0),
        speakersUnlocked: false,
        speakerUpgrade1: new Decimal(0),
        speakerUpgrade2: new Decimal(0),
        speakerUpgrade3: new Decimal(0),
        speakerUpgrade4: new Decimal(0),
        speakerUpgrade5: new Decimal(0),
        speakerUpgrade6: new Decimal(0),
        speakerUpgrade7: new Decimal(0),
        
        // Achievements
        achievements: {
          ach1: false,
          ach2: false,
          ach3: false,
          ach4: false,
          ach5: false,
          ach6: false,
        },
        
        // Settings
        theme: 'black',
      };

      // Load saved game
      const savedData = localStorage.getItem('hzGameSave');
      if (savedData) {
        try {
          const parsed = JSON.parse(savedData);
          Object.keys(parsed).forEach(key => {
            if (key === 'achievements') {
              gameState.achievements = parsed.achievements;
            } else if (key === 'theme') {
              gameState.theme = parsed.theme;
            } else if (typeof gameState[key] !== 'undefined') {
              gameState[key] = new Decimal(parsed[key]);
            }
          });
        } catch (e) {
          console.error('Failed to load save:', e);
        }
      }

      // Apply theme
      applyTheme(gameState.theme);

      // Calculate Hz per second
      function calculateHzPerSec() {
        let base = new Decimal(1);
        
        // Upgrade 1: Double per level
        base = base.times(Decimal.pow(2, gameState.upgrade1Level));
        
        // Upgrade 2: 1.25x per level
        base = base.times(Decimal.pow(1.25, gameState.upgrade2Level));
        
        // Upgrade 3: 1.5x per level
        base = base.times(Decimal.pow(1.5, gameState.upgrade3Level));
        
        // Upgrade 4: 2x per level
        base = base.times(Decimal.pow(2, gameState.upgrade4Level));
        
        // Upgrade 5: 3x per level
        base = base.times(Decimal.pow(3, gameState.upgrade5Level));
        
        // Upgrade 6: 5x per level
        base = base.times(Decimal.pow(5, gameState.upgrade6Level));
        
        // Volume boost
        if (gameState.volumeUnlocked) {
          let volumeBoost = gameState.volume.plus(1);
          
          // Volume upgrades
          if (gameState.volumeUpgrade1.gt(0)) {
            volumeBoost = volumeBoost.times(Decimal.pow(1.5, gameState.volumeUpgrade1));
          }
          if (gameState.volumeUpgrade3.gt(0)) {
            base = base.times(Decimal.pow(2, gameState.volumeUpgrade3));
          }
          if (gameState.volumeUpgrade5.gt(0)) {
            base = base.times(gameState.hz.plus(1).log10().plus(1).pow(gameState.volumeUpgrade5.times(0.1)));
          }
          
          base = base.times(volumeBoost);
        }
        
        // Speaker boost
        if (gameState.speakersUnlocked) {
          let speakerBoost = gameState.speakers.plus(1).pow(2);
          
          // Speaker upgrades
          if (gameState.speakerUpgrade1.gt(0)) {
            speakerBoost = speakerBoost.times(Decimal.pow(2, gameState.speakerUpgrade1));
          }
          if (gameState.speakerUpgrade3.gt(0)) {
            base = base.times(Decimal.pow(3, gameState.speakerUpgrade3));
          }
          if (gameState.speakerUpgrade5.gt(0)) {
            base = base.times(gameState.volume.plus(1).pow(gameState.speakerUpgrade5.times(0.5)));
          }
          if (gameState.speakerUpgrade7.gt(0)) {
            base = base.times(Decimal.pow(10, gameState.speakerUpgrade7));
          }
          
          base = base.times(speakerBoost);
        }
        
        return base;
      }

      // Calculate volume gain
      function calculateVolumeGain() {
        let base = gameState.hz.div(1000000).sqrt().floor();
        
        // Volume upgrade 2: increase volume gain
        if (gameState.volumeUpgrade2.gt(0)) {
          base = base.times(Decimal.pow(2, gameState.volumeUpgrade2));
        }
        
        // Speaker upgrade 2: boost volume gain
        if (gameState.speakerUpgrade2.gt(0)) {
          base = base.times(Decimal.pow(1.5, gameState.speakerUpgrade2));
        }
        
        // Speaker upgrade 4: massive volume boost
        if (gameState.speakerUpgrade4.gt(0)) {
          base = base.times(gameState.speakers.plus(1).pow(gameState.speakerUpgrade4));
        }
        
        return base.floor();
      }

      // Calculate speaker gain
      function calculateSpeakerGain() {
        let base = gameState.volume.div(100).sqrt().floor();
        
        // Speaker upgrade 6: boost speaker gain
        if (gameState.speakerUpgrade6.gt(0)) {
          base = base.times(Decimal.pow(2, gameState.speakerUpgrade6));
        }
        
        return base.floor();
      }

      // Format number
      function formatNumber(num, decimals = 2) {
        num = new Decimal(num);
        if (num.lt(1000)) return num.toFixed(0);
        if (num.lt(1000000)) return num.toFixed(decimals);
        
        const abbrev = ['', 'K', 'M', 'B', 'T', 'Qa', 'Qi', 'Sx', 'Sp', 'Oc', 'No', 'Dc'];
        const exp = Math.floor(num.e / 3);
        
        if (exp < abbrev.length) {
          const mantissa = num.div(Decimal.pow(10, exp * 3));
          return mantissa.toFixed(decimals) + abbrev[exp];
        }
        
        return num.mantissa.toFixed(decimals) + 'e' + num.e;
      }

      // Update display
      function updateDisplay() {
        gameState.hzPerSec = calculateHzPerSec();
        
        // Hz display
        document.getElementById('hz-display').textContent = formatNumber(gameState.hz) + ' Hz';
        document.getElementById('gain-display').textContent = formatNumber(gameState.hzPerSec) + ' Hz/s';
        
        // Upgrade costs
        updateUpgradeButton('upgrade1', gameState.upgrade1Cost, gameState.upgrade1Level);
        updateUpgradeButton('upgrade2', gameState.upgrade2Cost, gameState.upgrade2Level);
        updateUpgradeButton('upgrade3', gameState.upgrade3Cost, gameState.upgrade3Level);
        updateUpgradeButton('upgrade4', gameState.upgrade4Cost, gameState.upgrade4Level);
        updateUpgradeButton('upgrade5', gameState.upgrade5Cost, gameState.upgrade5Level);
        updateUpgradeButton('upgrade6', gameState.upgrade6Cost, gameState.upgrade6Level);
        
        // Volume
        if (gameState.volumeUnlocked) {
          document.getElementById('tab-volume').classList.remove('hidden');
          document.getElementById('volume-display').textContent = formatNumber(gameState.volume);
          const volumeBoost = gameState.volume.plus(1);
          document.getElementById('volume-boost').textContent = formatNumber(volumeBoost, 2) + 'x';
          
          updateVolumeUpgrade('vol-up1', new Decimal(10).times(Decimal.pow(5, gameState.volumeUpgrade1)), gameState.volumeUpgrade1);
          updateVolumeUpgrade('vol-up2', new Decimal(25).times(Decimal.pow(10, gameState.volumeUpgrade2)), gameState.volumeUpgrade2);
          updateVolumeUpgrade('vol-up3', new Decimal(50).times(Decimal.pow(20, gameState.volumeUpgrade3)), gameState.volumeUpgrade3);
          updateVolumeUpgrade('vol-up4', new Decimal(100).times(Decimal.pow(50, gameState.volumeUpgrade4)), gameState.volumeUpgrade4);
          updateVolumeUpgrade('vol-up5', new Decimal(250).times(Decimal.pow(100, gameState.volumeUpgrade5)), gameState.volumeUpgrade5);
          updateVolumeUpgrade('vol-up6', new Decimal(500).times(Decimal.pow(250, gameState.volumeUpgrade6)), gameState.volumeUpgrade6);
        }
        
        // Speakers
        if (gameState.speakersUnlocked) {
          document.getElementById('tab-speakers').classList.remove('hidden');
          document.getElementById('speakers-display').textContent = formatNumber(gameState.speakers);
          const speakerBoost = gameState.speakers.plus(1).pow(2);
          document.getElementById('speakers-boost').textContent = formatNumber(speakerBoost, 2) + 'x';
          
          updateSpeakerUpgrade('spk-up1', new Decimal(5).times(Decimal.pow(10, gameState.speakerUpgrade1)), gameState.speakerUpgrade1);
          updateSpeakerUpgrade('spk-up2', new Decimal(10).times(Decimal.pow(25, gameState.speakerUpgrade2)), gameState.speakerUpgrade2);
          updateSpeakerUpgrade('spk-up3', new Decimal(20).times(Decimal.pow(50, gameState.speakerUpgrade3)), gameState.speakerUpgrade3);
          updateSpeakerUpgrade('spk-up4', new Decimal(50).times(Decimal.pow(100, gameState.speakerUpgrade4)), gameState.speakerUpgrade4);
          updateSpeakerUpgrade('spk-up5', new Decimal(100).times(Decimal.pow(200, gameState.speakerUpgrade5)), gameState.speakerUpgrade5);
          updateSpeakerUpgrade('spk-up6', new Decimal(250).times(Decimal.pow(500, gameState.speakerUpgrade6)), gameState.speakerUpgrade6);
          updateSpeakerUpgrade('spk-up7', new Decimal(1000).times(Decimal.pow(1000, gameState.speakerUpgrade7)), gameState.speakerUpgrade7);
        }
        
        // Prestige buttons
        const volumeGain = calculateVolumeGain();
        const speakerGain = calculateSpeakerGain();
        
        document.getElementById('volume-gain-display').textContent = formatNumber(volumeGain);
        document.getElementById('speaker-gain-display').textContent = formatNumber(speakerGain);
        
        const volumeBtn = document.getElementById('prestige-volume-btn');
        const speakerBtn = document.getElementById('prestige-speaker-btn');
        
        volumeBtn.disabled = volumeGain.lt(1);
        if (!gameState.volumeUnlocked) {
          volumeBtn.disabled = gameState.hz.lt(1000000);
        }
        
        if (gameState.volumeUnlocked) {
          document.getElementById('speaker-prestige-section').classList.remove('hidden');
          speakerBtn.disabled = speakerGain.lt(1);
          if (!gameState.speakersUnlocked) {
            speakerBtn.disabled = gameState.volume.lt(100);
          }
        }
        
        checkAchievements();
      }

      function updateUpgradeButton(id, cost, level) {
        const btn = document.getElementById(id + '-btn');
        const costEl = document.getElementById(id + '-cost');
        const levelEl = document.getElementById(id + '-level');
        
        costEl.textContent = formatNumber(cost);
        levelEl.textContent = formatNumber(level);
        btn.disabled = gameState.hz.lt(cost);
      }

      function updateVolumeUpgrade(id, cost, level) {
        const btn = document.getElementById(id + '-btn');
        const costEl = document.getElementById(id + '-cost');
        const levelEl = document.getElementById(id + '-level');
        
        costEl.textContent = formatNumber(cost);
        levelEl.textContent = formatNumber(level);
        btn.disabled = gameState.volume.lt(cost);
      }

      function updateSpeakerUpgrade(id, cost, level) {
        const btn = document.getElementById(id + '-btn');
        const costEl = document.getElementById(id + '-cost');
        const levelEl = document.getElementById(id + '-level');
        
        costEl.textContent = formatNumber(cost);
        levelEl.textContent = formatNumber(level);
        btn.disabled = gameState.speakers.lt(cost);
      }

      // Check achievements
      function checkAchievements() {
        if (gameState.hz.gte(1) && !gameState.achievements.ach1) {
          unlockAchievement('ach1', 'First Hertz');
        }
        if (gameState.hz.gte(100) && !gameState.achievements.ach2) {
          unlockAchievement('ach2', 'Frequency Rising');
        }
        if (gameState.hz.gte(10000) && !gameState.achievements.ach3) {
          unlockAchievement('ach3', 'Sonic Boom');
        }
        if (gameState.volumeUnlocked && !gameState.achievements.ach4) {
          unlockAchievement('ach4', 'Turn It Up!');
        }
        if (gameState.speakersUnlocked && !gameState.achievements.ach5) {
          unlockAchievement('ach5', 'Sound System');
        }
        if (gameState.speakers.gte(10) && !gameState.achievements.ach6) {
          unlockAchievement('ach6', 'Concert Hall');
        }
        
        // Update achievement display
        Object.keys(gameState.achievements).forEach(key => {
          const el = document.getElementById(key);
          if (gameState.achievements[key]) {
            el.classList.add('completed');
          }
        });
      }

      function unlockAchievement(id, name) {
        gameState.achievements[id] = true;
        showPopup(`Achievement Unlocked: ${name}!`, 'achievement');
      }

      function showPopup(message, type = 'info') {
        const popup = document.getElementById('popup');
        popup.textContent = message;
        popup.classList.add('visible');
        popup.style.background = type === 'achievement' 
          ? 'linear-gradient(135deg, #10b981 0%, #34d399 100%)' 
          : 'rgba(0,0,0,0.9)';
        popup.style.color = type === 'achievement' ? '#000' : '#fff';
        setTimeout(() => popup.classList.remove('visible'), 3000);
      }

      // Game loop
      function gameLoop() {
        gameState.hz = gameState.hz.plus(gameState.hzPerSec.div(30));
        updateDisplay();
      }

      // Buy upgrades
      function buyUpgrade(upgradeNum) {
        const costKey = `upgrade${upgradeNum}Cost`;
        const levelKey = `upgrade${upgradeNum}Level`;
        
        if (gameState.hz.gte(gameState[costKey])) {
          gameState.hz = gameState.hz.minus(gameState[costKey]);
          gameState[levelKey] = gameState[levelKey].plus(1);
          gameState[costKey] = gameState[costKey].times(upgradeNum === 1 ? 2 : upgradeNum === 2 ? 2.5 : upgradeNum === 3 ? 3 : upgradeNum === 4 ? 4 : upgradeNum === 5 ? 5 : 6);
          updateDisplay();
        }
      }

      function buyVolumeUpgrade(upgradeNum) {
        const id = `vol-up${upgradeNum}`;
        const levelKey = `volumeUpgrade${upgradeNum}`;
        const cost = new Decimal(upgradeNum === 1 ? 10 : upgradeNum === 2 ? 25 : upgradeNum === 3 ? 50 : upgradeNum === 4 ? 100 : upgradeNum === 5 ? 250 : 500)
          .times(Decimal.pow(upgradeNum === 1 ? 5 : upgradeNum === 2 ? 10 : upgradeNum === 3 ? 20 : upgradeNum === 4 ? 50 : upgradeNum === 5 ? 100 : 250, gameState[levelKey]));
        
        if (gameState.volume.gte(cost)) {
          gameState.volume = gameState.volume.minus(cost);
          gameState[levelKey] = gameState[levelKey].plus(1);
          updateDisplay();
        }
      }

      function buySpeakerUpgrade(upgradeNum) {
        const id = `spk-up${upgradeNum}`;
        const levelKey = `speakerUpgrade${upgradeNum}`;
        const cost = new Decimal(upgradeNum === 1 ? 5 : upgradeNum === 2 ? 10 : upgradeNum === 3 ? 20 : upgradeNum === 4 ? 50 : upgradeNum === 5 ? 100 : upgradeNum === 6 ? 250 : 1000)
          .times(Decimal.pow(upgradeNum === 1 ? 10 : upgradeNum === 2 ? 25 : upgradeNum === 3 ? 50 : upgradeNum === 4 ? 100 : upgradeNum === 5 ? 200 : upgradeNum === 6 ? 500 : 1000, gameState[levelKey]));
        
        if (gameState.speakers.gte(cost)) {
          gameState.speakers = gameState.speakers.minus(cost);
          gameState[levelKey] = gameState[levelKey].plus(1);
          updateDisplay();
        }
      }

      // Prestige functions
      function prestigeVolume() {
        const gain = calculateVolumeGain();
        if (gain.gte(1) || (!gameState.volumeUnlocked && gameState.hz.gte(1000000))) {
          gameState.volume = gameState.volume.plus(gain);
          gameState.volumeUnlocked = true;
          
          // Reset Hz stuff
          gameState.hz = new Decimal(0);
          gameState.upgrade1Level = new Decimal(0);
          gameState.upgrade1Cost = new Decimal(7);
          gameState.upgrade2Level = new Decimal(0);
          gameState.upgrade2Cost = new Decimal(100);
          gameState.upgrade3Level = new Decimal(0);
          gameState.upgrade3Cost = new Decimal(500);
          gameState.upgrade4Level = new Decimal(0);
          gameState.upgrade4Cost = new Decimal(2500);
          gameState.upgrade5Level = new Decimal(0);
          gameState.upgrade5Cost = new Decimal(10000);
          gameState.upgrade6Level = new Decimal(0);
          gameState.upgrade6Cost = new Decimal(50000);
          
          showPopup(`Prestiged! +${formatNumber(gain)} Volume`, 'achievement');
          updateDisplay();
        }
      }

      function prestigeSpeaker() {
        const gain = calculateSpeakerGain();
        if (gain.gte(1) || (!gameState.speakersUnlocked && gameState.volume.gte(100))) {
          gameState.speakers = gameState.speakers.plus(gain);
          gameState.speakersUnlocked = true;
          
          // Reset everything below
          gameState.volume = new Decimal(0);
          gameState.volumeUpgrade1 = new Decimal(0);
          gameState.volumeUpgrade2 = new Decimal(0);
          gameState.volumeUpgrade3 = new Decimal(0);
          gameState.volumeUpgrade4 = new Decimal(0);
          gameState.volumeUpgrade5 = new Decimal(0);
          gameState.volumeUpgrade6 = new Decimal(0);
          
          gameState.hz = new Decimal(0);
          gameState.upgrade1Level = new Decimal(0);
          gameState.upgrade1Cost = new Decimal(7);
          gameState.upgrade2Level = new Decimal(0);
          gameState.upgrade2Cost = new Decimal(100);
          gameState.upgrade3Level = new Decimal(0);
          gameState.upgrade3Cost = new Decimal(500);
          gameState.upgrade4Level = new Decimal(0);
          gameState.upgrade4Cost = new Decimal(2500);
          gameState.upgrade5Level = new Decimal(0);
          gameState.upgrade5Cost = new Decimal(10000);
          gameState.upgrade6Level = new Decimal(0);
          gameState.upgrade6Cost = new Decimal(50000);
          
          showPopup(`Mega Prestige! +${formatNumber(gain)} Speakers`, 'achievement');
          updateDisplay();
        }
      }

      // Save/Load
      function saveGame() {
        const saveObj = {};
        Object.keys(gameState).forEach(key => {
          if (gameState[key] instanceof Decimal) {
            saveObj[key] = gameState[key].toString();
          } else {
            saveObj[key] = gameState[key];
          }
        });
        localStorage.setItem('hzGameSave', JSON.stringify(saveObj));
        showPopup('Game Saved!');
      }

      function loadGame() {
        const input = document.getElementById('save-input').value;
        try {
          const parsed = JSON.parse(input);
          Object.keys(parsed).forEach(key => {
            if (key === 'achievements') {
              gameState.achievements = parsed.achievements;
            } else if (key === 'theme') {
              gameState.theme = parsed.theme;
              applyTheme(gameState.theme);
            } else if (typeof gameState[key] !== 'undefined') {
              gameState[key] = new Decimal(parsed[key]);
            }
          });
          updateDisplay();
          saveGame();
          document.getElementById('popup2').classList.remove('visible');
          showPopup('Game Loaded!');
        } catch (e) {
          showPopup('Invalid save data!');
        }
      }

      function exportSave() {
        const data = localStorage.getItem('hzGameSave');
        navigator.clipboard.writeText(data);
        showPopup('Save copied to clipboard!');
      }

      function downloadSave() {
        const data = localStorage.getItem('hzGameSave');
        const blob = new Blob([data], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'hertz_save.json';
        a.click();
        showPopup('Save downloaded!');
      }

      function resetGame() {
        if (confirm('Are you sure? This will delete ALL progress!')) {
          localStorage.removeItem('hzGameSave');
          location.reload();
        }
      }

      // Theme system
      function applyTheme(theme) {
        const body = document.body;
        const themes = ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'pink', 'brown', 'black', 'white'];
        themes.forEach(t => body.classList.remove(`theme-${t}`));
        body.classList.add(`theme-${theme}`);
        
        // Update active theme button
        document.querySelectorAll('.theme-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        document.getElementById(`theme-${theme}`).classList.add('active');
      }

      function changeTheme(theme) {
        gameState.theme = theme;
        applyTheme(theme);
        saveGame();
        document.getElementById('popup-theme').classList.remove('visible');
      }

      // Tab system
      function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(tab => {
          tab.classList.remove('bg-white', 'bg-green-500', 'bg-orange-500', 'bg-blue-500', 'bg-purple-500', 'bg-teal-500', 'text-black');
          tab.classList.add('text-gray-300', 'bg-gray-800');
        });
        
        document.querySelectorAll('.content').forEach(content => {
          content.classList.add('hidden');
        });
        
        const activeTab = document.getElementById(`tab-${tabName}`);
        const color = activeTab.dataset.color;
        activeTab.classList.remove('text-gray-300', 'bg-gray-800');
        activeTab.classList.add(color, 'text-black');
        
        document.getElementById(`${tabName}-content`).classList.remove('hidden');
      }

      // Event listeners
      for (let i = 1; i <= 6; i++) {
        document.getElementById(`upgrade${i}-btn`).addEventListener('click', () => buyUpgrade(i));
      }
      
      for (let i = 1; i <= 6; i++) {
        document.getElementById(`vol-up${i}-btn`).addEventListener('click', () => buyVolumeUpgrade(i));
      }
      
      for (let i = 1; i <= 7; i++) {
        document.getElementById(`spk-up${i}-btn`).addEventListener('click', () => buySpeakerUpgrade(i));
      }

      document.getElementById('prestige-volume-btn').addEventListener('click', prestigeVolume);
      document.getElementById('prestige-speaker-btn').addEventListener('click', prestigeSpeaker);
      
      document.getElementById('save-button').addEventListener('click', saveGame);
      document.getElementById('load-button').addEventListener('click', () => {
        document.getElementById('popup2').classList.add('visible');
      });
      document.getElementById('submit-load').addEventListener('click', loadGame);
      document.getElementById('cancel-load').addEventListener('click', () => {
        document.getElementById('popup2').classList.remove('visible');
      });
      document.getElementById('export-button').addEventListener('click', exportSave);
      document.getElementById('download-button').addEventListener('click', downloadSave);
      document.getElementById('reset-button').addEventListener('click', resetGame);
      
      document.getElementById('theme-button').addEventListener('click', () => {
        document.getElementById('popup-theme').classList.add('visible');
      });
      document.getElementById('close-theme').addEventListener('click', () => {
        document.getElementById('popup-theme').classList.remove('visible');
      });

      // Theme buttons
      const themes = ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'pink', 'brown', 'black', 'white'];
      themes.forEach(theme => {
        document.getElementById(`theme-${theme}`).addEventListener('click', () => changeTheme(theme));
      });

      // Tab buttons
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const contentName = this.id.replace('tab-', '');
          switchTab(contentName);
        });
      });

      // Start game loop
      setInterval(gameLoop, 1000 / 30);
      setInterval(saveGame, 30000); // Auto-save every 30 seconds
      
      updateDisplay();
    });
  </script>
</head>

<body class="theme-black font-sans h-screen overflow-hidden">
  <div class="flex h-full">
    <!-- Sidebar -->
    <div class="w-1/5 bg-black bg-opacity-50 p-6 flex flex-col justify-center space-y-3 border-r-2 border-white border-opacity-20">
      <div id="tab-hz" class="tab text-4xl font-bold text-black bg-white p-4 cursor-pointer rounded-lg border-2 border-white" data-color="bg-white">
        <i class="fas fa-bolt"></i> Hz
      </div>

      <div id="tab-volume" class="tab text-lg text-gray-300 bg-gray-800 p-4 cursor-pointer rounded-lg border-2 border-purple-500 hidden" data-color="bg-purple-500">
        <i class="fas fa-volume-up"></i> Volume
      </div>

      <div id="tab-speakers" class="tab text-lg text-gray-300 bg-gray-800 p-4 cursor-pointer rounded-lg border-2 border-teal-500 hidden" data-color="bg-teal-500">
        <i class="fas fa-broadcast-tower"></i> Speakers
      </div>

      <div id="tab-achievements" class="tab text-lg text-gray-300 bg-gray-800 p-4 cursor-pointer rounded-lg border-2 border-green-500" data-color="bg-green-500">
        <i class="fas fa-trophy"></i> Achievements
      </div>

      <div id="tab-settings" class="tab text-lg text-gray-300 bg-gray-800 p-4 cursor-pointer rounded-lg border-2 border-orange-500" data-color="bg-orange-500">
        <i class="fas fa-cog"></i> Settings
      </div>

      <div id="tab-changelog" class="tab text-lg text-gray-300 bg-gray-800 p-4 cursor-pointer rounded-lg border-2 border-blue-500" data-color="bg-blue-500">
        <i class="fas fa-list"></i> Changelog
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 p-8 scrollable-content">
      <!-- Hz Tab -->
      <div id="hz-content" class="content">
        <div class="stat-display text-center">
          <div class="text-3xl mb-2 text-secondary">You Have</div>
          <div id="hz-display" class="text-7xl font-bold mb-4 text-primary">0 Hz</div>
          <div id="gain-display" class="text-2xl text-secondary">1 Hz/s</div>
        </div>

        <div class="grid-upgrades">
          <!-- Upgrade 1 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-arrow-up"></i> Double Production</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 2</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade1-cost" class="text-yellow-400">7</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade1-level">0</span></div>
              </div>
              <button id="upgrade1-btn" class="upgrade-btn border-yellow-400 text-yellow-400">BUY</button>
            </div>
          </div>

          <!-- Upgrade 2 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-fire"></i> Power Boost</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 1.25</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade2-cost" class="text-orange-400">100</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade2-level">0</span></div>
              </div>
              <button id="upgrade2-btn" class="upgrade-btn border-orange-400 text-orange-400">BUY</button>
            </div>
          </div>

          <!-- Upgrade 3 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-rocket"></i> Frequency Surge</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 1.5</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade3-cost" class="text-red-400">500</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade3-level">0</span></div>
              </div>
              <button id="upgrade3-btn" class="upgrade-btn border-red-400 text-red-400">BUY</button>
            </div>
          </div>

          <!-- Upgrade 4 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-star"></i> Harmonic Resonance</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 2</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade4-cost" class="text-green-400">2500</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade4-level">0</span></div>
              </div>
              <button id="upgrade4-btn" class="upgrade-btn border-green-400 text-green-400">BUY</button>
            </div>
          </div>

          <!-- Upgrade 5 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-chart-line"></i> Wave Amplifier</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 3</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade5-cost" class="text-blue-400">10000</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade5-level">0</span></div>
              </div>
              <button id="upgrade5-btn" class="upgrade-btn border-blue-400 text-blue-400">BUY</button>
            </div>
          </div>

          <!-- Upgrade 6 -->
          <div class="upgrade-card">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-crown"></i> Sonic Overdrive</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 5</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="upgrade6-cost" class="text-purple-400">50000</span> Hz</div>
                <div class="text-sm text-secondary">Level: <span id="upgrade6-level">0</span></div>
              </div>
              <button id="upgrade6-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>
        </div>

        <!-- Volume Prestige -->
        <div class="stat-display mt-8 bg-purple-900 bg-opacity-30 border-purple-500">
          <div class="text-3xl font-bold mb-4 text-purple-400"><i class="fas fa-volume-up"></i> VOLUME PRESTIGE</div>
          <div class="text-xl mb-4 text-secondary">Reset Hz upgrades to gain <span id="volume-gain-display" class="text-purple-300 font-bold">0</span> Volume</div>
          <div class="text-lg mb-4 text-secondary">Requirement: 1,000,000 Hz (first time) or gain at least 1 Volume</div>
          <button id="prestige-volume-btn" class="prestige-btn">TURN UP THE VOLUME</button>
        </div>
      </div>

      <!-- Volume Tab -->
      <div id="volume-content" class="content hidden">
        <div class="stat-display text-center">
          <div class="text-3xl mb-2 text-secondary"><i class="fas fa-volume-up"></i> Volume</div>
          <div id="volume-display" class="text-7xl font-bold mb-4 text-purple-400">0</div>
          <div class="text-2xl text-secondary">Hz Boost: <span id="volume-boost" class="text-purple-300">1x</span></div>
        </div>

        <div class="grid-upgrades">
          <!-- Volume Upgrade 1 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-plus-circle"></i> Volume Power</div>
            <div class="text-sm mb-3 text-secondary">Boost Volume effect by 1.5x</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up1-cost" class="text-purple-400">10</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up1-level">0</span></div>
              </div>
              <button id="vol-up1-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>

          <!-- Volume Upgrade 2 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-gem"></i> Volume Multiplier</div>
            <div class="text-sm mb-3 text-secondary">Double Volume gain on prestige</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up2-cost" class="text-purple-400">25</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up2-level">0</span></div>
              </div>
              <button id="vol-up2-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>

          <!-- Volume Upgrade 3 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-bolt"></i> Resonant Frequency</div>
            <div class="text-sm mb-3 text-secondary">Double Hz production directly</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up3-cost" class="text-purple-400">50</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up3-level">0</span></div>
              </div>
              <button id="vol-up3-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>

          <!-- Volume Upgrade 4 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-compress-arrows-alt"></i> Compression</div>
            <div class="text-sm mb-3 text-secondary">Improve Hz upgrade efficiency</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up4-cost" class="text-purple-400">100</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up4-level">0</span></div>
              </div>
              <button id="vol-up4-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>

          <!-- Volume Upgrade 5 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-infinity"></i> Logarithmic Scale</div>
            <div class="text-sm mb-3 text-secondary">Hz boost based on current Hz (log formula)</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up5-cost" class="text-purple-400">250</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up5-level">0</span></div>
              </div>
              <button id="vol-up5-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>

          <!-- Volume Upgrade 6 -->
          <div class="upgrade-card border-purple-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-magic"></i> Perfect Pitch</div>
            <div class="text-sm mb-3 text-secondary">Unlock advanced resonance patterns</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="vol-up6-cost" class="text-purple-400">500</span> Volume</div>
                <div class="text-sm text-secondary">Level: <span id="vol-up6-level">0</span></div>
              </div>
              <button id="vol-up6-btn" class="upgrade-btn border-purple-400 text-purple-400">BUY</button>
            </div>
          </div>
        </div>

        <!-- Speaker Prestige -->
        <div id="speaker-prestige-section" class="stat-display mt-8 bg-teal-900 bg-opacity-30 border-teal-500 hidden">
          <div class="text-3xl font-bold mb-4 text-teal-400"><i class="fas fa-broadcast-tower"></i> SPEAKER PRESTIGE</div>
          <div class="text-xl mb-4 text-secondary">Reset Volume & Hz to gain <span id="speaker-gain-display" class="text-teal-300 font-bold">0</span> Speakers</div>
          <div class="text-lg mb-4 text-secondary">Requirement: 100 Volume (first time) or gain at least 1 Speaker</div>
          <button id="prestige-speaker-btn" class="prestige-btn bg-gradient-to-br from-teal-500 to-cyan-500 border-teal-400">AMPLIFY WITH SPEAKERS</button>
        </div>
      </div>

      <!-- Speakers Tab -->
      <div id="speakers-content" class="content hidden">
        <div class="stat-display text-center">
          <div class="text-3xl mb-2 text-secondary"><i class="fas fa-broadcast-tower"></i> Speakers</div>
          <div id="speakers-display" class="text-7xl font-bold mb-4 text-teal-400">0</div>
          <div class="text-2xl text-secondary">Hz Boost: <span id="speakers-boost" class="text-teal-300">1x</span></div>
        </div>

        <div class="grid-upgrades">
          <!-- Speaker Upgrade 1 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-volume-up"></i> Speaker Amplification</div>
            <div class="text-sm mb-3 text-secondary">Double Speaker boost effect</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up1-cost" class="text-teal-400">5</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up1-level">0</span></div>
              </div>
              <button id="spk-up1-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 2 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-layer-group"></i> Volume Enhancement</div>
            <div class="text-sm mb-3 text-secondary">Boost Volume gain by 1.5x</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up2-cost" class="text-teal-400">10</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up2-level">0</span></div>
              </div>
              <button id="spk-up2-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 3 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-tachometer-alt"></i> Triple Hz Power</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 3 directly</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up3-cost" class="text-teal-400">20</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up3-level">0</span></div>
              </div>
              <button id="spk-up3-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 4 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-sync-alt"></i> Feedback Loop</div>
            <div class="text-sm mb-3 text-secondary">Volume gain scales with Speakers</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up4-cost" class="text-teal-400">50</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up4-level">0</span></div>
              </div>
              <button id="spk-up4-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 5 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-atom"></i> Volume Synergy</div>
            <div class="text-sm mb-3 text-secondary">Hz boost based on Volume amount</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up5-cost" class="text-teal-400">100</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up5-level">0</span></div>
              </div>
              <button id="spk-up5-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 6 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-recycle"></i> Efficient Prestige</div>
            <div class="text-sm mb-3 text-secondary">Double Speaker gain on prestige</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up6-cost" class="text-teal-400">250</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up6-level">0</span></div>
              </div>
              <button id="spk-up6-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>

          <!-- Speaker Upgrade 7 -->
          <div class="upgrade-card border-teal-400">
            <div class="text-2xl font-bold mb-2 text-primary"><i class="fas fa-star"></i> Megaphone</div>
            <div class="text-sm mb-3 text-secondary">Multiply Hz/s by 10 (MEGA BOOST!)</div>
            <div class="flex justify-between items-center">
              <div>
                <div class="text-lg text-secondary">Cost: <span id="spk-up7-cost" class="text-teal-400">1000</span> Speakers</div>
                <div class="text-sm text-secondary">Level: <span id="spk-up7-level">0</span></div>
              </div>
              <button id="spk-up7-btn" class="upgrade-btn border-teal-400 text-teal-400">BUY</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Achievements Tab -->
      <div id="achievements-content" class="content hidden">
        <div class="stat-display">
          <div class="text-3xl font-bold mb-6 text-center text-primary"><i class="fas fa-trophy"></i> ACHIEVEMENTS</div>
          <div class="achievement" id="ach1">First Hertz - Reach 1 Hz</div>
          <div class="achievement" id="ach2">Frequency Rising - Reach 100 Hz</div>
          <div class="achievement" id="ach3">Sonic Boom - Reach 10,000 Hz</div>
          <div class="achievement" id="ach4">Turn It Up! - Unlock Volume</div>
          <div class="achievement" id="ach5">Sound System - Unlock Speakers</div>
          <div class="achievement" id="ach6">Concert Hall - Reach 10 Speakers</div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settings-content" class="content hidden">
        <div class="stat-display">
          <div class="text-3xl font-bold mb-6 text-primary"><i class="fas fa-cog"></i> SETTINGS</div>
          
          <div class="space-y-4">
            <button id="save-button" class="upgrade-btn border-green-400 text-green-400 w-full">
              <i class="fas fa-save"></i> SAVE GAME
            </button>
            
            <button id="load-button" class="upgrade-btn border-blue-400 text-blue-400 w-full">
              <i class="fas fa-upload"></i> LOAD SAVE
            </button>
            
            <button id="export-button" class="upgrade-btn border-yellow-400 text-yellow-400 w-full">
              <i class="fas fa-copy"></i> COPY SAVE TO CLIPBOARD
            </button>
            
            <button id="download-button" class="upgrade-btn border-purple-400 text-purple-400 w-full">
              <i class="fas fa-download"></i> DOWNLOAD SAVE
            </button>
            
            <button id="theme-button" class="upgrade-btn border-pink-400 text-pink-400 w-full">
              <i class="fas fa-palette"></i> CHANGE THEME
            </button>
            
            <button id="reset-button" class="upgrade-btn border-red-400 text-red-400 w-full">
              <i class="fas fa-trash"></i> HARD RESET
            </button>
          </div>
        </div>
      </div>

      <!-- Changelog Tab -->
      <div id="changelog-content" class="content hidden">
        <div class="stat-display">
          <div class="text-3xl font-bold mb-6 text-primary"><i class="fas fa-list"></i> CHANGELOG</div>
          
          <div class="space-y-4">
            <div class="upgrade-card border-blue-400">
              <div class="text-2xl font-bold mb-2 text-primary">v0.4.1a - Polish Update</div>
              <ul class="list-disc list-inside space-y-2 text-secondary">
                <li>Fixed popup sizes - no more oversized dialogs!</li>
                <li>Added theme-based text coloring for better readability</li>
                <li>Improved popup styling and animations</li>
                <li>Better contrast across all themes</li>
                <li>Minor UI improvements</li>
              </ul>
            </div>

            <div class="upgrade-card border-purple-400">
              <div class="text-2xl font-bold mb-2 text-primary">v0.4a - The Anniversary Update ðŸŽ‰</div>
              <ul class="list-disc list-inside space-y-2 text-secondary">
                <li>Complete remaster with modern UI/UX</li>
                <li>Switched to Break Eternity.js for better number handling</li>
                <li>Added 10 beautiful themes (Red, Orange, Yellow, Green, Blue, Purple, Pink, Brown, Black, White)</li>
                <li>Volume prestige system now fully functional with 6 unique upgrades</li>
                <li>NEW: Speakers prestige layer with 7 powerful upgrades</li>
                <li>Added 6 new Hz upgrades for better progression</li>
                <li>Improved achievement system</li>
                <li>Better save/load functionality</li>
                <li>Auto-save every 30 seconds</li>
                <li>Smooth animations and visual effects</li>
                <li>Responsive grid layout for upgrades</li>
                <li>Custom scrollbar styling</li>
              </ul>
            </div>

            <div class="upgrade-card border-gray-400">
              <div class="text-xl font-bold mb-2 text-secondary">v0.3.2a - Fixes</div>
              <ul class="list-disc list-inside text-secondary">
                <li>Bug fixes and improvements</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popups -->
  <div id="popup" class="popup"></div>

  <div id="popup2" class="popup2">
    <div class="text-white text-2xl font-bold mb-4"><i class="fas fa-upload"></i> Load Save</div>
    <input id="save-input" type="text" placeholder="Paste your save here..." class="mt-4 p-3 rounded-lg bg-gray-700 text-white w-full border-2 border-gray-500 focus:border-blue-400 outline-none">
    <div class="flex space-x-4 mt-6">
      <button id="submit-load" class="upgrade-btn border-green-400 text-green-400 flex-1">SUBMIT</button>
      <button id="cancel-load" class="upgrade-btn border-red-400 text-red-400 flex-1">CANCEL</button>
    </div>
  </div>

  <div id="popup-theme" class="popup-theme">
    <div class="text-white text-2xl font-bold mb-6 text-center"><i class="fas fa-palette"></i> Choose Your Theme</div>
    <div class="flex flex-wrap justify-center">
      <div id="theme-red" class="theme-btn" style="background: linear-gradient(135deg, #991b1b, #dc2626);"></div>
      <div id="theme-orange" class="theme-btn" style="background: linear-gradient(135deg, #9a3412, #ea580c);"></div>
      <div id="theme-yellow" class="theme-btn" style="background: linear-gradient(135deg, #854d0e, #eab308);"></div>
      <div id="theme-green" class="theme-btn" style="background: linear-gradient(135deg, #166534, #22c55e);"></div>
      <div id="theme-blue" class="theme-btn" style="background: linear-gradient(135deg, #1e40af, #3b82f6);"></div>
      <div id="theme-purple" class="theme-btn" style="background: linear-gradient(135deg, #6b21a8, #a855f7);"></div>
      <div id="theme-pink" class="theme-btn" style="background: linear-gradient(135deg, #9f1239, #ec4899);"></div>
      <div id="theme-brown" class="theme-btn" style="background: linear-gradient(135deg, #4e342e, #795548);"></div>
      <div id="theme-black" class="theme-btn active" style="background: linear-gradient(135deg, #000000, #374151);"></div>
      <div id="theme-white" class="theme-btn" style="background: linear-gradient(135deg, #e5e5e5, #ffffff);"></div>
    </div>
    <button id="close-theme" class="upgrade-btn border-gray-400 text-gray-400 mt-6 w-full">CLOSE</button>
  </div>

  <!-- Version -->
  <div class="version"><i class="fas fa-code"></i> v0.4.1a - Polish Update</div>
</body>
</html>
